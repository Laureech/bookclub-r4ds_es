---
title: "R para Ciencia de Datos"
subtitle: "Capítulo 3: Visualización de datos"
author: "Roberto Villegas-Diaz (GH/villegar)"
date: 2020-12-29
output:
  xaringan::moon_reader:
    nature:
      highlightStyle: github
      highlightLines: true
      beforeInit: macros.js
    lib_dir: libs
    css: xaringan-themer.css
    includes:
      after_body: insertar-r4ds-es-logo.html
    ratio: '16:9'
---


```{r xaringan-themer, include = FALSE}
xaringanthemer::style_mono_light(
  base_color = "#0099D8",#"#3092FF",
  header_font_google = xaringanthemer::google_font("Josefin Sans"),
  text_font_google   = xaringanthemer::google_font("Montserrat", "300", "300i"),
  code_font_google   = xaringanthemer::google_font("Droid Mono")
)
```

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  fig.path = "figuras/",
  message = FALSE,
  warning = FALSE,
  out.width = "100%",
  fig.retina = 3,
  fig.align = 'center',
  dpi = 300,
  dev = 'svg'
)
```

## Contenidos

* Primeros pasos
* Mapeos estéticos
* Problemas comunes
* Separar en facetas
* Objetos geométricos
* Transformaciones estadísticas
* Ajustes de posición
* Sistemas de coordenadas
* La grámatica de gráficos en capas

---

## Recordatorio
Para poder ejecutar los ejercicios en este libro, los siguientes paquetes tienen 
que ser instalados:

```{r}
if (!require(tidyverse))
  install.packages("tidyverse")
if (!require(datos))
  install.packages("datos")
```

---

## Primeros pasos

Una generalización de un gráfico:
```{r eval = FALSE}
ggplot(data = <DATOS>) +
  <FUNCIÓN_GEOM>(mapping = aes(<MAPEOS>))
```

<!-- Pregunta de interes: -->

<!-- > ¿los automóviles con motores grandes consumen más combustible que los -->
<!-- automóviles con motores pequeños? -->

```{r simple, out.height = '330px'}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = autopista))
```

---

### 3.2.4 Ejercicios

1. Ejecuta `ggplot(data = millas)`. ¿Qué observas?

2. ¿Cuántas filas hay en millas? ¿Cuántas columnas?

3. ¿Qué describe la variable `traccion`? Lee la ayuda de `?millas` para encontrar la respuesta.

4. Realiza un gráfico de dispersión de `autopista` versus `cilindros`.

5. ¿Qué sucede cuando haces un gráfico de dispersión (scatterplot) de `clase` versus `traccion`? ¿Por qué no es útil este gráfico?

---
## Mapeos estéticos

Incluye: tamaño, forma, color, transparencia, etc.

```{r eval = FALSE}
ggplot(data = <DATOS>) +
  <FUNCIÓN_GEOM>(mapping = aes(<MAPEOS>, <MAPEOS_ESTÉTICOS>))
```

Alternativamente, las estéticas pueden ser independientes de los datos mapeados:
```{r eval = FALSE}
ggplot(data = <DATOS>) +
  <FUNCIÓN_GEOM>(mapping = aes(<MAPEOS>), <ESTÉTICAS>)
```

---

### 3.3.1 Ejercicios

1. ¿Qué no va bien en este código? ¿Por qué hay puntos que no son azules?
```{r eval = FALSE}
ggplot(data = millas) +
  geom_point(mapping = aes(x = cilindrada, y = autopista, color = "blue"))
```

2. ¿Qué variables en `millas` son categóricas? ¿Qué variables son continuas? (Pista: escribe `?millas` para leer la documentación de ayuda para este conjunto de datos). ¿Cómo puedes ver esta información cuando ejecutas `millas`?

3. Asigna una variable continua a `color`, `size`, y `shape`. ¿Cómo se comportan estas estéticas de manera diferente para variables categóricas y variables continuas?

4. ¿Qué ocurre si asignas o mapeas la misma variable a múltiples estéticas?

5. ¿Qué hace la estética `stroke`? ¿Con qué formas trabaja? (Pista: consulta `?geom_point`)

6. ¿Qué ocurre si se asigna o mapea una estética a algo diferente del nombre de una variable, como `aes(color = cilindrada < 5)`?

---

## Problemas comunes

---

## Separar en facetas

---

## Objetos geométricos

---

## Transformaciones estadísticas

---

## Ajustes de posición

---

## Sistemas de coordenadas

---

## La grámatica de gráficos en capas

